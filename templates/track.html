{% extends "base.html" %}
{% load humanize %}
{% block content %}
<a href="{{ request.META.HTTP_REFERER|default:'/' }}" class="back-btn">← Back</a>

{% if title %}
  <h2>{{ title }}</h2>
  <p class="meta">{{ artist }} · Plays: {{ playcount|intcomma }}</p>

  {% if preview %}
      <audio controls style="width:100%; max-width:360px; margin-top:8px">
          <source src="{{ preview }}" type="audio/mpeg">
          Your browser does not support the audio element.
      </audio>
      <p style="font-size:0.8rem; color:var(--muted)">30-second preview provided by iTunes.</p>
  {% else %}
      <p><em>No preview available.</em></p>
  {% endif %}

  <div class="card" style="margin-top:1rem">{{ summary|safe }}</div>
{% else %}
  <p>Could not fetch track information.</p>
{% endif %}
{% endblock %}
