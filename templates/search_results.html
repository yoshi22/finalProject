{% extends "base.html" %}{% block content %}
<h2>Results for “{{ query }}”</h2>
<div class="grid">
{% for t in tracks %}
  <div class="card">
    <h3>{{ t.name }}</h3>
    <p class="meta">{{ t.artist }}</p>
    <a href="{% url 'similar' %}?artist={{ t.artist }}&track={{ t.name }}">Similar</a> ·
    <a href="{% url 'track_detail' t.artist t.name %}">Play</a>
    {% if request.user.is_authenticated and request.user.playlists.exists %}
      <form action="{% url 'playlist_add' request.user.playlists.first.pk %}" method="post" style="margin-top:4px">
        {% csrf_token %}
        <input type="hidden" name="artist" value="{{ t.artist }}">
        <input type="hidden" name="track" value="{{ t.name }}">
        <button style="font-size:0.8rem">Add to first playlist</button>
      </form>
    {% endif %}
  </div>
{% empty %}
  <p>No results found.</p>
{% endfor %}
</div>{% endblock %}
